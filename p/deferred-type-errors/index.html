<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>AtnNn.com - Deferred type errors in Haskell</title>
        <link rel="stylesheet" type="text/css" href="../../css/default.css" />
        <link rel="alternate" type="application/atom+xml" title="AtnNn.com" href="../../atom.xml" />
    </head>
    <body>
        <div id="header">
            <div id="logo">
                &Eacute;tienne Laurin
            </div>
            <div id="navigation">
              <a href="../../">Articles</a>
              <a href="../../about">About</a>
            </div>
        </div>
        <div id="content">
            <h1>Deferred type errors in Haskell</h1>

            <div class="info">
    Posted on May 13, 2012
    
</div>

<p>Deferred type errors will be in GHC 7.6!</p>
<p><a href="http://hackage.haskell.org/trac/ghc/wiki/Status/May12" class="uri">http://hackage.haskell.org/trac/ghc/wiki/Status/May12</a></p>
<p>I’ve wanted this for a long time. I first tried implementing it in 2010 as a perl script. I completed my first working implementation in 2011.</p>
<p><a href="http://hackage.haskell.org/trac/ghc/ticket/5624#comment:1" class="uri">http://hackage.haskell.org/trac/ghc/ticket/5624#comment:1</a></p>
<p>The idea was not new.</p>
<p><a href="https://plus.google.com/107890464054636586545/posts/EbSuoRA6FTw" class="uri">https://plus.google.com/107890464054636586545/posts/EbSuoRA6FTw</a></p>
<p>and Simon Peyton Jones had already thought about a better way to implement it.</p>
<p><a href="http://hackage.haskell.org/trac/ghc/ticket/5624#comment:4" class="uri">http://hackage.haskell.org/trac/ghc/ticket/5624#comment:4</a></p>
<p>The idea is described in much more detail in the paper “Equality proofs and deferred type errors”.</p>
<p><a href="http://research.microsoft.com/en-us/um/people/simonpj/papers/ext-f/icfp12.pdf" class="uri">http://research.microsoft.com/en-us/um/people/simonpj/papers/ext-f/icfp12.pdf</a></p>
<p>I have been working with deferred type errors for the past 6 months. One of the benefits is to be able to interact with code in ghci even when there is a type error. Especially for large unknown codebases such as GHC.</p>
<p>Deferred errors replace the sometimes tedious step of commenting out code and replacing it with undefined, and later removing undefined and uncommenting.</p>
<p>For example, I can <code>:load TcInteract.lhs</code> to test my modifications. If I introduced a type error, it shows as a warning and I can immediately use <code>:type</code>, <code>:info</code>, and <code>:browse</code> on identifiers from other modules and from <code>TcInteract</code> as well.</p>
<p>Deferred type errors are also useful when refactoring code. When I change the type of a function that is used in many other files, GHCi can list, in a single run, all the type errors across all files. I can then easily fix all the use sites of that function by skipping from one error to the next in my IDE. Previously, the process was iterative because GHC stopped after each file containing an error.</p>

        </div>
        <div id="footer">
          © 2010-2022 Etienne Laurin
        </div>
    </body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-11375946-4', 'auto');
  ga('send', 'pageview');
</script>
</html>
